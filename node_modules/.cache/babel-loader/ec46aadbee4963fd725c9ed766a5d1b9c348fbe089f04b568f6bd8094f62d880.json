{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = 'https://localhost:7194/api/CarritoCompras';\nconst API_AUTOR_URL = 'https://localhost:7114/api/Autor';\nexport const crearCarrito = async data => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/Crear`, data);\n    return response.data;\n  } catch (error) {\n    console.error('Error al crear el carrito:', error);\n    throw error;\n  }\n};\nexport const obtenerCarritoPorId = async id => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al obtener carrito por ID:', error);\n    throw error;\n  }\n};\nexport const obtenerTodoElCarrito = async () => {\n  try {\n    const response = await axios.get(API_BASE_URL);\n    const data = response.data;\n\n    // Obtener información de los autores para cada producto\n    const carritosConAutores = await Promise.all(data.map(async carrito => {\n      const productosConAutores = await Promise.all(carrito.listaDeProductos.map(async producto => {\n        try {\n          // Obtener la imagen del autor en base64\n          const autorResponse = await axios.get(`${API_AUTOR_URL}/${producto.autorLibro}`);\n          const autor = autorResponse.data;\n          console.log('Autor Imagen:', autor.imagen); // Verificar la imagen\n          return {\n            ...producto,\n            autorNombre: `${autor.nombre} ${autor.apellido}`,\n            autorImagen: autor.imagen // Imagen en base64\n          };\n        } catch (error) {\n          console.error(`Error al obtener autor para el producto ${producto.libroId}:`, error);\n          return {\n            ...producto,\n            autorNombre: 'Autor desconocido',\n            autorImagen: null\n          };\n        }\n      }));\n      return {\n        ...carrito,\n        listaDeProductos: productosConAutores\n      };\n    }));\n    return carritosConAutores;\n  } catch (error) {\n    console.error('Error al obtener todo el carrito:', error);\n    throw error;\n  }\n};\nexport const eliminarArticuloDelCarrito = async (carritoSesionId, productoId) => {\n  try {\n    const response = await axios.delete(`${API_BASE_URL}/Eliminar/${carritoSesionId}/${productoId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al eliminar el artículo del carrito:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","API_AUTOR_URL","crearCarrito","data","response","post","error","console","obtenerCarritoPorId","id","get","obtenerTodoElCarrito","carritosConAutores","Promise","all","map","carrito","productosConAutores","listaDeProductos","producto","autorResponse","autorLibro","autor","log","imagen","autorNombre","nombre","apellido","autorImagen","libroId","eliminarArticuloDelCarrito","carritoSesionId","productoId","delete"],"sources":["C:/Users/ventu/OneDrive/Escritorio/Desarollo Web Integral/Front/consumo-microservice-libreria/src/services/apiCarrito.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = 'https://localhost:7194/api/CarritoCompras';\r\nconst API_AUTOR_URL = 'https://localhost:7114/api/Autor';\r\n\r\nexport const crearCarrito = async (data) => {\r\n  try {\r\n    const response = await axios.post(`${API_BASE_URL}/Crear`, data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error al crear el carrito:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const obtenerCarritoPorId = async (id) => {\r\n  try {\r\n    const response = await axios.get(`${API_BASE_URL}/${id}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error al obtener carrito por ID:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const obtenerTodoElCarrito = async () => {\r\n  try {\r\n    const response = await axios.get(API_BASE_URL);\r\n    const data = response.data;\r\n\r\n    // Obtener información de los autores para cada producto\r\n    const carritosConAutores = await Promise.all(data.map(async (carrito) => {\r\n      const productosConAutores = await Promise.all(carrito.listaDeProductos.map(async (producto) => {\r\n        try {\r\n          // Obtener la imagen del autor en base64\r\n          const autorResponse = await axios.get(`${API_AUTOR_URL}/${producto.autorLibro}`);\r\n          const autor = autorResponse.data;\r\n          console.log('Autor Imagen:', autor.imagen); // Verificar la imagen\r\n          return {\r\n            ...producto,\r\n            autorNombre: `${autor.nombre} ${autor.apellido}`,\r\n            autorImagen: autor.imagen // Imagen en base64\r\n          };\r\n        } catch (error) {\r\n          console.error(`Error al obtener autor para el producto ${producto.libroId}:`, error);\r\n          return {\r\n            ...producto,\r\n            autorNombre: 'Autor desconocido',\r\n            autorImagen: null\r\n          };\r\n        }\r\n      }));\r\n\r\n      return {\r\n        ...carrito,\r\n        listaDeProductos: productosConAutores\r\n      };\r\n    }));\r\n\r\n    return carritosConAutores;\r\n  } catch (error) {\r\n    console.error('Error al obtener todo el carrito:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const eliminarArticuloDelCarrito = async (carritoSesionId, productoId) => {\r\n  try {\r\n    const response = await axios.delete(`${API_BASE_URL}/Eliminar/${carritoSesionId}/${productoId}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error al eliminar el artículo del carrito:', error);\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}