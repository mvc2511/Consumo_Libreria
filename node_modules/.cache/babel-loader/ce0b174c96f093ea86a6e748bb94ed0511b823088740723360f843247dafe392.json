{"ast":null,"code":"import axios from 'axios';\nconst API_CARRITO_URL = 'https://localhost:7194/api/CarritoCompras';\nconst API_AUTOR_URL = 'https://localhost:7114/api/Autor';\nexport const crearCarrito = async data => {\n  try {\n    const response = await axios.post(`${API_CARRITO_URL}/Crear`, data);\n    return response.data;\n  } catch (error) {\n    console.error('Error al crear el carrito:', error);\n    throw error;\n  }\n};\nexport const obtenerCarritoPorId = async id => {\n  try {\n    const response = await axios.get(`${API_CARRITO_URL}/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al obtener carrito por ID:', error);\n    throw error;\n  }\n};\nexport const obtenerTodoElCarrito = async () => {\n  try {\n    const responseCarrito = await axios.get(API_CARRITO_URL);\n    const carritos = responseCarrito.data;\n    const autores = await getAutores();\n    const autoresDic = {};\n    autores.forEach(autor => {\n      autoresDic[autor.autorLibroGuid] = {\n        nombre: `${autor.nombre} ${autor.apellido}`,\n        imagen: autor.imagen // Base64 image\n      };\n    });\n    const carritosConDetalles = carritos.map(carrito => {\n      const listaDeProductosConDetalles = carrito.listaDeProductos.map(producto => {\n        const autor = autoresDic[producto.autorLibro] || {\n          nombre: 'Autor desconocido',\n          imagen: null\n        };\n        return {\n          ...producto,\n          autorNombre: autor.nombre,\n          autorImagen: autor.imagen\n        };\n      });\n      return {\n        ...carrito,\n        listaDeProductos: listaDeProductosConDetalles\n      };\n    });\n    return carritosConDetalles;\n  } catch (error) {\n    console.error('Error al obtener los carritos:', error);\n    throw error;\n  }\n};\nexport const eliminarArticuloDelCarrito = async (carritoSesionId, productoId) => {\n  try {\n    const response = await axios.delete(`${API_BASE_URL}/Eliminar/${carritoSesionId}/${productoId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al eliminar el artículo del carrito:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_CARRITO_URL","API_AUTOR_URL","crearCarrito","data","response","post","error","console","obtenerCarritoPorId","id","get","obtenerTodoElCarrito","responseCarrito","carritos","autores","getAutores","autoresDic","forEach","autor","autorLibroGuid","nombre","apellido","imagen","carritosConDetalles","map","carrito","listaDeProductosConDetalles","listaDeProductos","producto","autorLibro","autorNombre","autorImagen","eliminarArticuloDelCarrito","carritoSesionId","productoId","delete","API_BASE_URL"],"sources":["C:/Users/ventu/OneDrive/Escritorio/Desarollo Web Integral/Front/consumo-microservice-libreria/src/services/apiCarrito.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_CARRITO_URL = 'https://localhost:7194/api/CarritoCompras';\r\nconst API_AUTOR_URL = 'https://localhost:7114/api/Autor';\r\n\r\nexport const crearCarrito = async (data) => {\r\n  try {\r\n    const response = await axios.post(`${API_CARRITO_URL}/Crear`, data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error al crear el carrito:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const obtenerCarritoPorId = async (id) => {\r\n  try {\r\n    const response = await axios.get(`${API_CARRITO_URL}/${id}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error al obtener carrito por ID:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const obtenerTodoElCarrito = async () => {\r\n  try {\r\n    const responseCarrito = await axios.get(API_CARRITO_URL);\r\n    const carritos = responseCarrito.data;\r\n\r\n    const autores = await getAutores();\r\n    const autoresDic = {};\r\n    autores.forEach(autor => {\r\n      autoresDic[autor.autorLibroGuid] = {\r\n        nombre: `${autor.nombre} ${autor.apellido}`,\r\n        imagen: autor.imagen // Base64 image\r\n      };\r\n    });\r\n\r\n    const carritosConDetalles = carritos.map(carrito => {\r\n      const listaDeProductosConDetalles = carrito.listaDeProductos.map(producto => {\r\n        const autor = autoresDic[producto.autorLibro] || { nombre: 'Autor desconocido', imagen: null };\r\n        return {\r\n          ...producto,\r\n          autorNombre: autor.nombre,\r\n          autorImagen: autor.imagen\r\n        };\r\n      });\r\n\r\n      return {\r\n        ...carrito,\r\n        listaDeProductos: listaDeProductosConDetalles\r\n      };\r\n    });\r\n\r\n    return carritosConDetalles;\r\n  } catch (error) {\r\n    console.error('Error al obtener los carritos:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const eliminarArticuloDelCarrito = async (carritoSesionId, productoId) => {\r\n  try {\r\n    const response = await axios.delete(`${API_BASE_URL}/Eliminar/${carritoSesionId}/${productoId}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error al eliminar el artículo del carrito:', error);\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,eAAe,GAAG,2CAA2C;AACnE,MAAMC,aAAa,GAAG,kCAAkC;AAExD,OAAO,MAAMC,YAAY,GAAG,MAAOC,IAAI,IAAK;EAC1C,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAML,KAAK,CAACM,IAAI,CAAC,GAAGL,eAAe,QAAQ,EAAEG,IAAI,CAAC;IACnE,OAAOC,QAAQ,CAACD,IAAI;EACtB,CAAC,CAAC,OAAOG,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IAClD,MAAMA,KAAK;EACb;AACF,CAAC;AAED,OAAO,MAAME,mBAAmB,GAAG,MAAOC,EAAE,IAAK;EAC/C,IAAI;IACF,MAAML,QAAQ,GAAG,MAAML,KAAK,CAACW,GAAG,CAAC,GAAGV,eAAe,IAAIS,EAAE,EAAE,CAAC;IAC5D,OAAOL,QAAQ,CAACD,IAAI;EACtB,CAAC,CAAC,OAAOG,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;IACxD,MAAMA,KAAK;EACb;AACF,CAAC;AAED,OAAO,MAAMK,oBAAoB,GAAG,MAAAA,CAAA,KAAY;EAC9C,IAAI;IACF,MAAMC,eAAe,GAAG,MAAMb,KAAK,CAACW,GAAG,CAACV,eAAe,CAAC;IACxD,MAAMa,QAAQ,GAAGD,eAAe,CAACT,IAAI;IAErC,MAAMW,OAAO,GAAG,MAAMC,UAAU,CAAC,CAAC;IAClC,MAAMC,UAAU,GAAG,CAAC,CAAC;IACrBF,OAAO,CAACG,OAAO,CAACC,KAAK,IAAI;MACvBF,UAAU,CAACE,KAAK,CAACC,cAAc,CAAC,GAAG;QACjCC,MAAM,EAAE,GAAGF,KAAK,CAACE,MAAM,IAAIF,KAAK,CAACG,QAAQ,EAAE;QAC3CC,MAAM,EAAEJ,KAAK,CAACI,MAAM,CAAC;MACvB,CAAC;IACH,CAAC,CAAC;IAEF,MAAMC,mBAAmB,GAAGV,QAAQ,CAACW,GAAG,CAACC,OAAO,IAAI;MAClD,MAAMC,2BAA2B,GAAGD,OAAO,CAACE,gBAAgB,CAACH,GAAG,CAACI,QAAQ,IAAI;QAC3E,MAAMV,KAAK,GAAGF,UAAU,CAACY,QAAQ,CAACC,UAAU,CAAC,IAAI;UAAET,MAAM,EAAE,mBAAmB;UAAEE,MAAM,EAAE;QAAK,CAAC;QAC9F,OAAO;UACL,GAAGM,QAAQ;UACXE,WAAW,EAAEZ,KAAK,CAACE,MAAM;UACzBW,WAAW,EAAEb,KAAK,CAACI;QACrB,CAAC;MACH,CAAC,CAAC;MAEF,OAAO;QACL,GAAGG,OAAO;QACVE,gBAAgB,EAAED;MACpB,CAAC;IACH,CAAC,CAAC;IAEF,OAAOH,mBAAmB;EAC5B,CAAC,CAAC,OAAOjB,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IACtD,MAAMA,KAAK;EACb;AACF,CAAC;AAED,OAAO,MAAM0B,0BAA0B,GAAG,MAAAA,CAAOC,eAAe,EAAEC,UAAU,KAAK;EAC/E,IAAI;IACF,MAAM9B,QAAQ,GAAG,MAAML,KAAK,CAACoC,MAAM,CAAC,GAAGC,YAAY,aAAaH,eAAe,IAAIC,UAAU,EAAE,CAAC;IAChG,OAAO9B,QAAQ,CAACD,IAAI;EACtB,CAAC,CAAC,OAAOG,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,4CAA4C,EAAEA,KAAK,CAAC;IAClE,MAAMA,KAAK;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}